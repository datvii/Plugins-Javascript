!function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.validationJs=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var t=function(e){var i=[t.defaults,e].reduce(function(e,t){return Object.keys(t).forEach(function(i){e[i]=t[i]}),e},{});this.options=i,this.init()};return t.prototype={init:function(){(function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);var e=this;function t(t){var i=t?t.target:window.event.srcElement,s=(e.findForms(),document.querySelectorAll(e.options.element),e.options.element,e.options.element+' input[type="submit"], input[type="button"], button'||'form input[type="submit"], input[type="button"], button'),n=e.options.element+' input:not([type="submit"]):not([type="button"]), textarea'||'form input:not([type="submit"]):not([type="button"]), textarea';if("click"===t.type&&i.matches(s))try{e.validateFieldsOnSubmit(i,t)}catch(e){throw e}("input"===t.type||"change"===t.type&&i.matches(n))&&e.validateFieldsOnKeyPress(i,t)}e.options.keypress&&(document.addEventListener("input",t,!1),document.addEventListener("change",t,!1)),document.addEventListener("click",t,!1)}).call(this)},findForms:function(){return document.querySelectorAll(this.options.element).length?document.querySelectorAll(this.options.element):document.querySelectorAll("form")},validateFieldsOnSubmit:function(e,t){if(e){var i,s=this.getParents(e),n=[],r=(i=s.filter(function(e){return"form"===e.nodeName.toLowerCase()}))[0].querySelectorAll(' input:not([type="submit"]):not([type="button"]), textarea, select');i[0].classList.contains("valid")&&i[0].classList.remove("valid"),this.checkForms(r,i),[].forEach.call(r,function(e){null!==e.className.match("invalid")&&n.push(e.className.match("invalid")[0])}.bind(this)),n.some(function(e){return"invalid"===e})?this.submitForm(t,!1,i[0]):this.submitForm(t,!0,i[0])}},validateFieldsOnKeyPress:function(e,t){var i;if(i=this.getParents(e).filter(function(e){return"form"===e.nodeName.toLowerCase()}),this.options.keypress)try{i[0].classList.add("keypress"),this.checkForms(t.target,i[0])}catch(e){}else try{i[0].classList.remove("keypress")}catch(e){}},setValidationType:function(e,t){if(this.options.showErrors)switch(e){case"required":this.setErrors(0,t);break;case"number":this.setErrors(1,t);break;case"email":this.setErrors(2,t);break;case"checkbox":this.setErrors(3,t);break;case"radio":this.setErrors(4,t);break;case"select":this.setErrors(5,t);break;case"equal":this.setErrors(6,t);break;case"minLen":this.setErrors(7,t);break;case"maxLen":this.setErrors(8,t);break;default:console.warn("Something goes wrong!")}},isValid:function(e,t){e?(t.classList.remove("invalid"),t.classList.add("valid"),this.options.parent&&(t.parentElement.classList.remove("invalid"),t.parentElement.classList.add("valid"))):(t.classList.remove("valid"),t.classList.add("invalid"),this.options.parent&&(t.parentElement.classList.remove("valid"),t.parentElement.classList.add("invalid")))},isEmail:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e.value).toLowerCase())},isNumber:function(e){return/^\d+$/.test(e.value)},isEqual:function(e){if(e.length){var t=[].slice.call(e);return t.every(function(e){return e.value===t[0].value})}},isMin:function(e){var t=parseInt(e.getAttribute("data-min"))||5;return e.value.length<t},isMax:function(e){var t=parseInt(e.getAttribute("data-max"))||15;return e.value.length>t},isChecked:function(e){return!!e.checked},isSelected:function(e){return 0===e.selectedIndex},removeError:function(e){var t=e.querySelector(".msg-err");t&&t.parentElement.removeChild(t)},getParents:function(e,t){void 0===t&&(t=document);for(var i=[],s=e.parentNode;s!==t;)try{var n=s;i.push(n),s=n.parentNode}catch(e){throw e}return i.push(t),i},checkForms:function(e,t){var i=0,s=this;try{if(t.classList.contains("keypress")&&null!==e.getAttribute("data-validate")){var n=e.getAttribute("data-validate"),r=e.getAttribute("type"),a=e.nodeName.toLowerCase(),o=e,l=-1!==n.indexOf("required"),c=-1!==n.indexOf("minLen"),d=-1!==n.indexOf("maxLen"),u=-1!==n.indexOf("equal"),m=-1!==n.indexOf("email"),p=-1!==n.indexOf("number"),h=-1!==n.indexOf("checkbox"),f=-1!==n.indexOf("radio"),v=-1!==n.indexOf("select"),y=t.querySelectorAll("[data-validate *= equal]");b(r,a,o)}}catch(e){}if(e.length)for(;i<e.length;i++){n=e[i].getAttribute("data-validate"),r=e[i].getAttribute("type"),a=e[i].nodeName.toLowerCase(),o=e[i];if(null!==n){l=-1!==n.indexOf("required"),c=-1!==n.indexOf("minLen"),d=-1!==n.indexOf("maxLen"),u=-1!==n.indexOf("equal"),m=-1!==n.indexOf("email"),p=-1!==n.indexOf("number"),h=-1!==n.indexOf("checkbox"),f=-1!==n.indexOf("radio"),v=-1!==n.indexOf("select"),y=t[0].querySelectorAll("[data-validate *= equal]");b(r,a,o)}}function b(e,t,i){if(null!==e&&"radio"!==e&&"checkbox"!==e){if(i.value.length<=0&&l?(s.isValid(!1,i),s.setValidationType("required",i)):(s.isValid(!0,i),s.removeError(i.parentElement)),c&&(s.isMin(i)?(s.isValid(!1,i),s.setValidationType("minLen",i)):(s.isValid(!0,i),s.removeError(i.parentElement))),d&&s.isMax(i)&&(s.isValid(!1,i),s.setValidationType("maxLen",i)),u)if(i.value.length<=0&&l)s.isValid(!1,i),s.setValidationType("required",i);else if(s.isValid(!0,i),s.removeError(i.parentElement),s.isEqual(y))for(var n=0;n<y.length;n++)s.isValid(!0,y[n]),s.removeError(y[n].parentElement);else s.isValid(!1,i),s.setValidationType("equal",i);m&&(s.isEmail(i)?(s.isValid(!0,i),s.removeError(i.parentElement)):(s.isValid(!1,i),s.setValidationType("email",i))),p&&(s.isNumber(i)||(s.isValid(!1,i),s.setValidationType("number",i)))}f&&"radio"===e&&(s.isChecked(i)?(s.isValid(!0,i),s.removeError(i.parentElement)):(s.isValid(!1,i),s.setValidationType("radio",i))),h&&"checkbox"===e&&(s.isChecked(i)?(s.isValid(!0,i),s.removeError(i.parentElement)):(s.isValid(!1,i),s.setValidationType("checkbox",i))),v&&"select"===t&&(s.isSelected(i)?(s.isValid(!1,i),s.setValidationType("select",i)):(s.isValid(!0,i),s.removeError(i.parentElement))),"textarea"===t&&(l&&(parseInt(i.value.length)<=0?(s.isValid(!1,i),s.setValidationType("required",i)):(s.isValid(!0,i),s.removeError(i.parentElement))),c&&(s.isMin(i)?(s.isValid(!1,i),s.setValidationType("minLen",i)):(s.isValid(!0,i),s.removeError(i.parentElement))),d&&s.isMax(i)&&(s.isValid(!1,i),s.setValidationType("maxLen",i)),p&&(s.isNumber(i)||(s.isValid(!1,i),s.setValidationType("number",i))))}},setErrors:function(e,t){var i,s=this.options.errors[e],n="";if(!t.parentElement.querySelector(".msg-err")){for(i in s)n=s[i];try{var r=document.createElement("span");r.classList.add("msg-err"),r.innerText=n,t.parentElement.appendChild(r)}catch(e){throw e}}},resetForms:function(e,t){e&&(t.classList.remove("valid"),t.reset())},setSuccessMsg:function(e,t,i){var s=t||"",n=document.createElement("div"),r=document.createElement("p"),a=document.createElement("span"),o=document.querySelectorAll(".successMsg"),l=this.options.closeText||"&cross;";n.classList.add("successMsg"),a.classList.add("close"),r.innerText=s,a.innerHTML=l,o.length&&[].forEach.call(o,function(e){e.parentElement.removeChild(e)}),e&&this.options.successMsg&&(r.appendChild(a),n.appendChild(r),i.appendChild(n))},checkFields:function(e){var t=e.querySelectorAll("input, textarea, select"),i=[];return[].forEach.call(t,function(e){i.push(e.classList.value)}),!0!==i.some(function(e){return"invalid"===e})},submitForm:function(e,t,i){e.preventDefault(),t&&this.checkFields(i)&&(this.options.submit&&(this.options.submitDelay?setTimeout(function(){i.submit()},this.options.delay):i.submit()),this.resetForms(!0,i),i.classList.add("valid"),this.setSuccessMsg(t,this.options.msg,i),this.options.redirect[0]&&(window.location.href=this.options.redirect[1]||"/"))}},t.defaults={element:".validation",parent:!1,keypress:!1,resetForm:!1,successMsg:!1,submit:!0,submitDelay:!0,delay:3e3,redirect:[!1,"/"],closeText:"&cross;",msg:"Form has been successfully sent!",showErrors:!1,errors:[{required:"Field is required"},{number:"Only numbers"},{email:"Incorrect email"},{checkbox:"Field(s) not checked"},{radio:"Field(s) not checked"},{select:"Please select something"},{equal:"Fields aren't equal"},{minLen:"Min length is 5 symbols"},{maxLen:"Max length is 15 symbols"}]},t});