!function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.selectJs=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var t=function(e){var n=[t.defaults,e].reduce(function(e,t){return Object.keys(t).forEach(function(n){e[n]=t[n]}),e},{});this.options=n,this.init()};return t.prototype={init:function(){document.querySelectorAll(this.options.element+"-initialized").length||(this.createSelect(!0),this.trackDom(),function(){var e=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),document.addEventListener("click",function(t){var n=t?t.target:window.event.srcElement;if(t.target.matches(e.options.element+" *:not(.option)"))try{var i=e.getClosest(n,".select-bar").nextSibling,o=e.getClosest(n,e.options.element);e.addScroll(i),i.classList.toggle("select-open"),o.classList.toggle("select-open")}catch(e){throw e}else if(t.target.matches(e.options.element+" .option"))try{var l=e.getClosest(n,".select-options"),r=(o=e.getClosest(n,e.options.element),n.innerText||n.innerContent),s=o.previousSibling,c=o.querySelector(".selected-value"),a=n.getAttribute("data-index");e.addScroll(l),l.classList.remove("select-open"),o.classList.remove("select-open"),c.innerText=r,s.selectedIndex=a}catch(e){throw e}},!1)}.call(this))},findSelect:function(){return document.querySelectorAll(this.options.element).length?document.querySelectorAll(this.options.element+":not(select)"):document.querySelectorAll("div"+this.options.element)},removeSelect:function(e){if(e)for(var t=this.findSelect(),n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n])},createSelect:function(e){var t=0,n=document.querySelectorAll("select"),i="";if(void 0!==e)for(this.removeSelect(e);t<n.length;t++){null!==n[t].getAttribute("style")&&n[t].removeAttribute("style");var o=document.createElement("div"),l=document.createElement("div"),r=document.createElement("div"),s=document.createElement("span"),c=(n[t].length,n[t].children.length);o.className=this.options.element.slice(1)+" "+this.options.element.slice(1)+"-initialized",o.setAttribute("data-select-id",t),n[t].setAttribute("data-select-id",t),l.className="select-bar",s.className="selected-value",r.className="select-options",l.appendChild(s),o.appendChild(l),o.appendChild(r);for(var a=0;a<c;a++){var d=document.createElement("span"),u=n[t].getAttribute("placeholder");this.options.txtFromPlaceholder?s.innerHTML=u:s.innerHTML=n[t].children[0].innerText,i=n[t].children[a].innerHTML,d.innerHTML=i,r.appendChild(d),d.className="option",d.setAttribute("data-index",a),d.tabIndex=a,this.addEasing(r),0===a&&(d.className+=" default")}n[t].parentNode.insertBefore(o,n[t].nextSibling)}},destroy:function(){var e=document.querySelectorAll("select"+this.options.element),t=0;for(this.removeSelect(!0);t<e.length;t++)e[t].setAttribute("style","position: static; opacity: 1; visibility: visible; z-index: 0; left: auto;"),e[t].removeAttribute("data-select-id")},addEasing:function(e){this.options.easing&&e.classList.add("select-easing")},addScroll:function(e){var t=function(){var e=document.createElement("fakeelement"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in t)if(t.hasOwnProperty(n)&&void 0!==e.style[n])return t[n]}();e.setAttribute("style","overflow-y: hidden"),e.addEventListener(t,function(e){"max-height"===e.propertyName&&e.target.setAttribute("style","overflow-y: auto")})},getClosest:function(e,t){for(;e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null},trackDom:function(){var e=window.MutationObserver||window.WebKitMutationObserver,t=this,n=function(){t.createSelect(!0)};e?function(){var i=document.querySelectorAll("select"+t.options.element),o={characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0};for(var l=new e(function(e){e.forEach(function(e){n()})}),r=0;r<i.length;r++)l.observe(i[r],o)}():document.addEventListener("DOMSubtreeModified",function(e){n()},!1)}},t.defaults={element:".selectJs",txtFromPlaceholder:!0,easing:!0},t});