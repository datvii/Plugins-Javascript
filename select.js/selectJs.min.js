!function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.selectJs=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var t=function(e){var n=[t.defaults,e].reduce(function(e,t){return Object.keys(t).forEach(function(n){e[n]=t[n]}),e},{});this.options=n,this.init()};return t.prototype={init:function(){document.querySelectorAll(this.options.element+"-initialized").length||(this.createSelect(!0),this.trackDom(),function(){var e=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),document.addEventListener("click",function(t){var n=t?t.target:window.event.srcElement,i="string"==typeof e.options.activeClass?e.options.activeClass:"option-active";if(t.target.matches(e.options.element+" *:not(.option)"))try{if(null===e.getClosest(n,".select-bar"))return;var o=e.getClosest(n,".select-bar").nextSibling,s=e.getClosest(n,e.options.element);e.getClosest(n,e.options.element)&&e.getClosest(n,e.options.element).classList.contains("select-open")?e.isOutsideClick(!1):e.isOutsideClick(!0),e.addScroll(o),o.classList.toggle("select-open"),s.classList.toggle("select-open")}catch(e){throw e}else if(t.target.matches(e.options.element+" .option"))try{var l=e.getClosest(n,".select-options"),c=l.children,r=(s=e.getClosest(n,e.options.element),n.innerText||n.innerContent),a=s.previousSibling,d=s.querySelector(".selected-value"),u=n.getAttribute("data-index");if(e.addScroll(l),l.classList.remove("select-open"),s.classList.remove("select-open"),d.innerText=r,a.selectedIndex=u,c)for(var p=0;p<c.length;p++)c[p].classList.remove(i);e.addActiveToOption(t.target,e.options.activeClass)}catch(e){throw e}t.target.matches(e.options.element+" *")||e.isOutsideClick(!0)},!1)}.call(this))},findSelect:function(){return document.querySelectorAll(this.options.element).length?document.querySelectorAll(this.options.element+":not(select)"):document.querySelectorAll("div"+this.options.element)},removeSelect:function(e){if(e)for(var t=this.findSelect(),n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n])},createSelect:function(e){var t=0,n=document.querySelectorAll("select"),i="";if(void 0!==e)for(this.removeSelect(e);t<n.length;t++){null!==n[t].getAttribute("style")&&n[t].removeAttribute("style");var o=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div"),c=document.createElement("span"),r=(n[t].length,n[t].children.length);[].forEach.call(n[t].children,function(e,t){e.setAttribute("data-id",t)});var a=document.querySelectorAll("option:checked",n[t]);[].forEach.call(a,function(e){e.classList.add("option-selected")}.bind(this)),o.className=this.options.element.slice(1)+" "+this.options.element.slice(1)+"-initialized",o.setAttribute("data-select-id",t),n[t].setAttribute("data-select-id",t),s.className="select-bar",c.className="selected-value",l.className="select-options",s.appendChild(c),o.appendChild(s),o.appendChild(l);for(var d=0;d<r;d++){var u=document.createElement("span"),p=n[t].getAttribute("data-placeholder");i=n[t].children[d].innerHTML,u.innerHTML=i,l.appendChild(u),u.className="option",u.setAttribute("data-index",d),u.tabIndex=d,this.addEasing(l),n[t].children[d].classList.contains("option-selected")&&this.isSelected(n[t].children[d])&&(u.className+=" option-active",c.innerHTML=n[t].children[d].innerText),0===d&&(this.options.txtFromPlaceholder?c.innerHTML=p:c.innerHTML=n[t].children[0].innerText,u.className+=" default")}n[t].parentNode.insertBefore(o,n[t].nextSibling)}},destroy:function(){var e=document.querySelectorAll("select"+this.options.element),t=0;for(this.removeSelect(!0);t<e.length;t++)e[t].setAttribute("style","position: static; opacity: 1; visibility: visible; z-index: 0; left: auto;"),e[t].removeAttribute("data-select-id")},isSelected:function(e){return!(!e||!e.selected)},addEasing:function(e){this.options.easing&&e.classList.add("select-easing")},isOutsideClick:function(e){var t=document.querySelectorAll(".select-open"),n=0;if(e)for(;n<t.length;n++)t[n].classList.remove("select-open")},addScroll:function(e){var t=function(){var e=document.createElement("fakeelement"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var n in t)if(t.hasOwnProperty(n)&&void 0!==e.style[n])return t[n]}();e.setAttribute("style","overflow-y: hidden"),e.addEventListener(t,function(e){"max-height"===e.propertyName&&e.target.setAttribute("style","overflow-y: auto")})},addActiveToOption:function(e,t){if(e){var n="string"==typeof t?t:"option-active";e.classList.add(n)}},getClosest:function(e,t){for(;e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null},trackDom:function(){var e=window.MutationObserver||window.WebKitMutationObserver,t=this,n=function(){t.createSelect(!0)};e?function(){var i=document.querySelectorAll("select"+t.options.element),o={characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0};for(var s=new e(function(e){e.forEach(function(e){n()})}),l=0;l<i.length;l++)s.observe(i[l],o)}():document.addEventListener("DOMSubtreeModified",function(e){n()},!1)}},t.defaults={element:".selectJs",txtFromPlaceholder:!0,easing:!0,activeClass:"option-active",outsideClick:!0},t});