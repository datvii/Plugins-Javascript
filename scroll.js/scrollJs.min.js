!function(t,e){"function"==typeof define&&define.amd?define([],e(t)):"object"==typeof exports?module.exports=e(t):t.scrollJs=e(t)}("undefined"!=typeof global?global:this.window||this.global,function(t){"use strict";var e=function(t){var o=[e.defaults,t].reduce(function(t,e){return Object.keys(e).forEach(function(o){t[o]=e[o]}),t},{});this.options=o,this.init()};function o(){var t=document.body,e=document.querySelector(".scroll_js"),o=document.documentElement.offsetHeight,n=this;function i(t){t=window.event||t;var o=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));return n.isMoving(),o>0?n.moveScroll(e,"up","0"):n.moveScroll(e,"down"),n.setStorage(e),!1}function s(i){var s=document.documentElement.offsetHeight;o!==s&&(o=s,n.checkSizes(),n.isScroll(e)),function(){if(n.options.destroy&&window.innerWidth>n.options.destroyOn)e.parentElement.classList.remove("breakpoint"),t.classList.remove("breakpoint");else if(n.options.destroy&&window.innerWidth<n.options.destroyOn){if(t.classList.contains("breakpoint"))return;"function"==typeof n.options.onDestroy&&n.options.onDestroy.call(n),e.parentElement.classList.add("breakpoint"),t.classList.add("breakpoint"),t.classList.remove("attachedEv")}}()}function r(){if(window.innerWidth>n.options.destroyOn){if(document.body.classList.contains("attachedEv"))return;t.addEventListener("mousewheel",i,!1),t.addEventListener("DOMMouseScroll",i,!1),t.classList.add("attachedEv")}else window.innerWidth<n.options.destroyOn&&(document.body.removeEventListener("mousewheel",i,!1),document.body.removeEventListener("DOMMouseScroll",i,!1),t.classList.remove("attachedEv"))}this.flag=!0,this.isScroll(e),this.trackDom(),this.onDrug(e),window.addEventListener("load",function(){s(),r()},!1),window.addEventListener("resize",function(){n.setStorage(e),r(),s(),n.checkSizes()},!1),window.addEventListener("orientationchange",function(){n.setStorage(e),r(),s(),n.checkSizes()},!1)}return e.prototype={init:function(){document.querySelector(".scroll_wrap_js")||document.querySelector(".scroll_js")||(this.createScroll(),this.checkSizes(),this.hideOnInactive(),this.flag=!1,this.timeoutID=void 0,this.isMobile(),o.call(this),"function"==typeof this.options.onInit&&this.options.onInit.call(this))},createScroll:function(){if(!document.querySelector(".scroll_wrap_js")&&!document.querySelector(".scroll_js")){var t=document.body,e=document.createElement("div"),o=document.createElement("span");e.className="scroll_wrap_js",o.className="scroll_js",o.setAttribute("draggable",!0),e.appendChild(o),t.appendChild(e)}},trackDom:function(){var t=document.querySelector(".scroll_js"),e=window.MutationObserver||window.WebKitMutationObserver,o=this;e?function(){var n=document;new e(function(e){e.forEach(function(e){o.checkSizes(),o.isScroll(t)})}).observe(n,{characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0})}():document.addEventListener("DOMSubtreeModified",function(){o.checkSizes(),o.isScroll(t)},!1)},setStorage:function(t){var e=window.pageYOffset||document.documentElement.scrollTop,o=this.getStyle(t).top;"undefined"!=typeof Storage&&void 0!==window.sessionStorage&&this.options.destroy&&window.innerWidth>this.options.destroyOn&&(sessionStorage.clear(),sessionStorage.docPos||sessionStorage.setItem("docPos",e),sessionStorage.scrollPos||sessionStorage.setItem("scrollPos",o))},getStorage:function(){if("undefined"!=typeof Storage&&void 0!==window.sessionStorage)var t=sessionStorage.getItem("docPos")||0,e=sessionStorage.getItem("scrollPos")||0;return{docPos:t||0,scrollPos:e||0}},isMoving:function(){this.showOnActive(),!0===this.flag&&(window.clearTimeout(this.timeoutID),this.hideOnInactive(this.flag))},getStyle:function(t){return window.getComputedStyle?getComputedStyle(t,""):t.currentStyle},getCoords:function(t){var e=t.getBoundingClientRect();return{top:e.top+pageYOffset,left:e.left+pageXOffset}},checkSizes:function(){var t=document.querySelector(".scroll_wrap_js"),e=t.querySelector(".scroll_js"),o=parseInt(this.getStyle(t).width.slice(0,-2)),n=parseInt(this.getStyle(e).width.slice(0,-2));o<4?(t.setAttribute("style","width: 4px !important"),e.setAttribute("style","width: 2px !important")):o>26&&(t.setAttribute("style","width: 26px !important"),e.setAttribute("style","width: 24px !important")),o-n!=2&&e.setAttribute("style","width: "+(o-2)+"px !important"),e.setAttribute("style"," top:"+this.getStorage().scrollPos+"; height: "+this.setScrollHeight(e).newHeight+"px !important;"),document.documentElement.scrollTop=this.getStorage().docPos},isScroll:function(t){document.documentElement.offsetHeight<=document.documentElement.clientHeight?t.parentElement.setAttribute("style","display: none;"):t.parentElement.setAttribute("style","display: block;")},setScrollHeight:function(t){var e=document.documentElement.clientHeight/document.documentElement.offsetHeight*100,o=document.documentElement.clientHeight*e/100;return{newHeight:parseInt(o-2),docHeight:document.documentElement.offsetHeight-document.documentElement.clientHeight}},getDifferenceScroll:function(t){return document.documentElement.clientHeight-t.offsetHeight-2},calculateScroll:function(t){var e=parseInt(this.getStyle(t).top.slice(0,-2)/this.getDifferenceScroll(t)*100);return{scroll:e,doc:parseInt(this.setScrollHeight(t).docHeight*(.01*e))}},scrollIt:function(t,e){var o=e||0;window.scrollTo(o,t)},moveScroll:function(t,e,o){if(t.length||void 0!==t){var n=parseInt(1.8*document.documentElement.clientHeight/100),i=document.querySelector(".scroll_wrap_js");if("up"===e)t.style.top=parseInt(t.style.top)-n+"px",setTimeout(function(){this.scrollIt(this.calculateScroll(t).doc)}.bind(this),30);else{var s=i.offsetHeight-t.offsetHeight;if(t.style.top=parseInt(t.style.top)+n+"px",t.style.top.slice(0,-2)>=s-2)return t.style.top=s-2+"px",void this.scrollIt(document.documentElement.offsetHeight-2);setTimeout(function(){this.scrollIt(this.calculateScroll(t).doc)}.bind(this),30)}if(t.style.top.slice(0,-2)<=0)return t.style.top=0,void this.scrollIt(0);"function"==typeof this.options.onScroll&&this.options.onScroll.call(this)}},onDrug:function(t){var e=document.querySelector(".scroll_wrap_js"),o=e.children[0],n=this;n.flag=!0,o.onmousedown=function(i){var s=n.getCoords(o),r=i.clientY-s.top,c=n.getCoords(e);return document.onmousemove=function(i){var s=i.clientY-r-c.top;n.isMoving(),s<0&&(s=0);var l=e.offsetHeight-o.offsetHeight;s>0&&s<l&&"function"==typeof n.options.onDrug&&n.options.onDrug.call(n),s>l&&(s=l-2),o.style.top=s+"px",n.scrollIt(n.calculateScroll(t).doc),n.setStorage(t)},document.onmouseup=function(){document.onmousemove=document.onmouseup=null},!1},o.ondragstart=function(){return!1}},hideOnInactive:function(){if(this.options.hideSlider&&!0===this.options.hideSlider){var t=document.querySelector(".scroll_wrap_js");this.timeoutID=window.setTimeout(function(){~t.className.indexOf("hide")||(t.classList.add("hide"),this.flag=!0)},this.options.duration)}},showOnActive:function(){if(this.options.hideSlider&&!0===this.options.hideSlider){var t=document.querySelector(".scroll_wrap_js");~t.className.indexOf("hide")&&(t.className=t.className.replace(/\bhide\b/g,""))}},isMobile:function(){if(this.options.mobile&&!1===this.options.mobile&&this.detectMobDevices()){var t=document.querySelector(".scroll_wrap_js");document.body.style.overflow="visible",t.style.display="none"}},detectMobDevices:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}},e.defaults={hideSlider:!1,duration:5e3,mobile:!1,destroy:!1,destroyOn:768,onInit:null,onDrug:null,onScroll:null,onDestroy:null},e});